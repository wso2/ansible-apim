[Unit]
Description=WSO2 API Manager - Control Plane profile
After=network.target

[Service]
{% if control_plane_memory %}
Environment=JVM_MEM_OPTS="{{ control_plane_memory }}"
{% endif %}
EnvironmentFile=/etc/profile.d/java_home.sh
ExecStart={{ carbon_home }}/bin/api-manager.sh -Dprofile=control-plane start
ExecStop={{ carbon_home }}/bin/api-manager.sh stop
ExecReload={{ carbon_home }}/bin/api-manager.sh restart
PIDFile={{ carbon_home }}/wso2carbon.pid
User={{ wso2_user }}
Group={{ wso2_group }}
Type=forking
Restart=on-failure
RestartSec=5
StartLimitInterval=60s
StartLimitBurst=3

[Install]
WantedBy=multi-user.target
